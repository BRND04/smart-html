<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>HTML → Smart‑named Downloader</title>
  <style>
    body{font-family:system-ui, sans-serif;max-width:700px;margin:2rem auto;padding:0 1rem;}
    textarea{width:100%;height:300px;font-family:monospace;font-size:0.9rem;padding:0.5rem;}
    .buttons{margin-top:0.75rem;display:flex;gap:0.5rem;}
    button{padding:0.6rem 1.2rem;font-size:1rem;border:0;border-radius:6px;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.15);transition:box-shadow 0.15s ease;}
    button:hover{box-shadow:0 3px 8px rgba(0,0,0,0.25);}
  </style>
</head>
<body>
  <h1>Paste your HTML – get an intelligently named file</h1>

  <textarea id="htmlInput" placeholder="Paste (or type) any HTML here…"></textarea>
  <div class="buttons">
    <button id="downloadBtn">Download</button>
    <button id="clearBtn">Clear</button>
  </div>

  <script>
    const input = document.getElementById('htmlInput');

    // Convert a string into a safe, concise slug
    function slugify(str){
      return str.toLowerCase()
                .replace(/[^a-z0-9]+/g,'-')       // non‑alphanumerics → dashes
                .replace(/^-+|-+$/g,'')           // trim leading/trailing dashes
                .slice(0,50) || 'untitled';       // keep it short & never empty
    }

    // Heuristic filename guesser – title > first h1 > default
    function guessFileName(htmlStr){
      try{
        const doc = new DOMParser().parseFromString(htmlStr,'text/html');
        const titleNode = doc.querySelector('title');
        const h1Node    = doc.querySelector('h1');
        const candidate = (titleNode && titleNode.textContent.trim()) ||
                          (h1Node && h1Node.textContent.trim());
        if(candidate) return slugify(candidate)+'.html';
      }catch(e){ /* ignore parse errors */ }
      return 'index.html';
    }

    // Download handler
    document.getElementById('downloadBtn').addEventListener('click', () => {
      const html = input.value.trim();
      if (!html) { alert('Nothing to save!'); return; }

      const fileName = guessFileName(html);
      const blob = new Blob([html], {type: 'text/html'});
      const url  = URL.createObjectURL(blob);

      const a = Object.assign(document.createElement('a'), {
        href: url,
        download: fileName
      });
      a.click();

      URL.revokeObjectURL(url);           // tidy up
    });

    // Clear handler
    document.getElementById('clearBtn').addEventListener('click', () => {
      input.value = '';
      input.focus();
    });
  </script>
</body>
</html>
